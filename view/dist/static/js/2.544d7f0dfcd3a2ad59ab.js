webpackJsonp([2],{"4qOc":function(t,e){},IxEH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("bOdI"),n=i.n(a),c=i("hTuX"),s=i("iD0u"),o=i("G0J2"),r=(i("4qOc"),n()({name:"articles",data:function(){return{content:"",articleTitle:"",articleContent:"",editorOption:{},img:"",tags:[],checkList:[]}},components:{quillEditor:o.quillEditor,"user-nav":s.a,"user-footer":c.a},mounted:function(){},methods:{onEditorChange:function(t){this.articleContent=t.html},getTag:function(){var t=this;this.$http({method:"post",url:this.HOST+"/api/getTag",params:{}}).then(function(e){var i=e.data;i&&200==i.code&&(t.tags=i.data)}).catch(function(t){return console.log(t)})},checkTag:function(t){t&&t.target&&(t.target.className?(t.target.className="",this.checkList.splice(this.checkList.findIndex(function(e){return e===t.target.innerHTML}),1)):(t.target.className="active",this.checkList.push(t.target.innerHTML)))},upload:function(t){var e=t.target.files[0],i=new FormData;i.append("files",e);var a=this;this.$http.post(this.HOST+"/api/upload",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var e=t.data;200==e.code&&(a.img=e.data)}).catch(function(t){})},submit:function(){var t=this;this.$http({method:"post",url:this.HOST+"/api/insertArticle",params:{title:t.articleTitle,content:t.articleContent,img:t.img,tag:t.checkList.join(",")},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){200==e.data.code&&t.$router.push("/")}).catch(function(t){})},validate:function(){var t=void 0;this.articleTitle?this.img?this.articleContent||(t="请输入文章内容"):t="请上传文章缩略图":t="请输入文章标题",t?alert(t):this.submit()}},created:function(){}},"mounted",function(){this.$nextTick(function(){this.getTag()})})),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"u-article"}},[i("user-nav"),t._v(" "),i("article",{staticClass:"u-wrap"},[i("section",{staticClass:"u-article"},[i("p",{staticClass:"tit"},[t._v("文章标题")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.articleTitle,expression:"articleTitle"}],attrs:{placeholder:"请输入标题...",type:"text"},domProps:{value:t.articleTitle},on:{input:function(e){e.target.composing||(t.articleTitle=e.target.value)}}})]),t._v(" "),i("section",{staticClass:"u-article"},[i("p",{staticClass:"tit"},[t._v("文章缩略图")]),t._v(" "),i("input",{attrs:{type:"file"},on:{change:t.upload}})]),t._v(" "),i("section",{staticClass:"u-article"},[i("p",{staticClass:"tit"},[t._v("文章标签")]),t._v(" "),i("ul",t._l(t.tags,function(e){return i("li",{on:{click:t.checkTag}},[t._v(t._s(e.name))])}))]),t._v(" "),i("section",{staticClass:"u-article"},[i("p",{staticClass:"tit"},[t._v("文章内容")]),t._v(" "),i("quill-editor",{ref:"myTextEditor",attrs:{content:t.content,config:t.editorOption},on:{change:function(e){t.onEditorChange(e)}}})],1),t._v(" "),i("section",{staticClass:"submit"},[i("button",{on:{click:t.validate}},[t._v("提交")])])]),t._v(" "),i("user-footer")],1)},staticRenderFns:[]};var u=i("VU/8")(r,l,!1,function(t){i("L474")},null,null);e.default=u.exports},L474:function(t,e){}});
//# sourceMappingURL=2.544d7f0dfcd3a2ad59ab.js.map